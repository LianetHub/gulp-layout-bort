(()=>{"use strict";$((function(){"undefined"!=typeof Fancybox&&null!==Fancybox&&Fancybox.bind("[data-fancybox]",{}),$(document).on("click",(function(e){const t=$(e.target);if(t.closest(".favorite-btn").length&&t.closest(".favorite-btn").toggleClass("active"),t.closest(".compare-btn").length&&t.toggleClass("active"),t.closest(".review-card__toggle").length){const e=t.closest(".review-card__toggle"),s=e.prev(".review-card__content");e.hasClass("is-active")?(s.removeClass("expanded"),e.removeClass("is-active").text("Показать полностью")):(s.addClass("expanded"),e.addClass("is-active").text("Скрыть отзыв"))}})),$(".quantity-block").each((function(){const e=$(this),t=e.find(".quantity-block__input"),s=e.find(".quantity-block__up"),i=e.find(".quantity-block__down");s.on("click",(function(){let e=parseInt(t.val())||0;e<9999&&t.val(e+1)})),i.on("click",(function(){let e=parseInt(t.val())||0;e>1&&t.val(e-1)})),t.on("input",(function(){let e=t.val().replace(/\D/g,"");e=parseInt(e)||1,e<1&&(e=1),e>9999&&(e=9999),t.val(e)})),t.on("paste",(function(e){const t=e.originalEvent.clipboardData.getData("text");/\D/.test(t)&&e.preventDefault()}))})),window.CatalogController=new class{constructor(){this.selectors={catalog:".header-catalog",toggler:".header-catalog__toggler",content:".header-catalog__content",itemParent:".header-catalog__item--parent",moreBtn:".header-catalog__more",backBtn:".header-catalog__back",closeBtn:".header-catalog__close",currentTitle:".header-catalog__current",list:".header-catalog__list",activeClass:"active",visibleClass:"visible",openSubmenuClass:"open-submenu",listSubmenuOpenClass:"submenu-opened",bodyClass:"open-catalog-menu"},this.defaultTitle="Каталог",this.init()}init(){$(document).on("click",this.selectors.toggler,(e=>{e.stopPropagation(),this.toggleCatalog()})),$(document).on("click",this.selectors.closeBtn,(()=>{this.closeCatalog()})),$(document).on("click",this.selectors.backBtn,(e=>{e.preventDefault(),this.goBack()})),$(document).on("click",(e=>{$(e.target).closest(this.selectors.catalog).length||this.closeCatalog()})),$(document).on("click",this.selectors.moreBtn,(e=>{e.preventDefault(),e.stopPropagation();const t=$(e.target).closest(this.selectors.itemParent);this.openSubmenu(t)}))}toggleCatalog(){const e=$(this.selectors.toggler),t=$(this.selectors.content),s=!t.hasClass(this.selectors.visibleClass);s?(window.SearchController?.closeSearch(),window.AuthController?.closeMenu(),$("body").addClass(this.selectors.bodyClass)):$("body").removeClass(this.selectors.bodyClass),e.toggleClass(this.selectors.activeClass),t.toggleClass(this.selectors.visibleClass),s||this.resetToDefault()}openSubmenu(e){const t=e.find("> .header-catalog__link").text().trim(),s=$(this.selectors.list);window.SearchController?.closeBar(),$(this.selectors.itemParent).removeClass(this.selectors.openSubmenuClass),e.addClass(this.selectors.openSubmenuClass),s.addClass(this.selectors.listSubmenuOpenClass),$(this.selectors.currentTitle).text(t)}goBack(){$(this.selectors.list).hasClass(this.selectors.listSubmenuOpenClass)?this.resetToDefault():this.closeCatalog()}resetToDefault(){$(this.selectors.itemParent).removeClass(this.selectors.openSubmenuClass),$(this.selectors.list).removeClass(this.selectors.listSubmenuOpenClass),$(this.selectors.currentTitle).text(this.defaultTitle)}closeCatalog(){$(this.selectors.toggler).removeClass(this.selectors.activeClass),$(this.selectors.content).removeClass(this.selectors.visibleClass),$("body").removeClass(this.selectors.bodyClass),this.resetToDefault()}},window.SearchController=new class{constructor(){this.selectors={search:".search",content:".search__content",input:".search__form-input",toggler:".search__toggler",bar:".search__bar",activeClass:"active",visibleClass:"visible"},this.init()}init(){$(document).on("click",this.selectors.toggler,(e=>{e.stopPropagation(),this.toggleSearch()})),$(document).on("input",this.selectors.input,(e=>{this.handleInput($(e.target))})),$(document).on("focus",this.selectors.input,(e=>{this.handleInput($(e.target))})),$(document).on("click",(e=>{$(e.target).closest(this.selectors.search).length||this.closeSearch()})),$(document).on("keydown",(e=>{"Escape"===e.key&&this.closeSearch()}))}toggleSearch(){const e=$(this.selectors.search),t=$(this.selectors.toggler),s=$(this.selectors.content),i=!s.hasClass(this.selectors.activeClass);i&&window.CatalogController?.closeCatalog(),t.toggleClass(this.selectors.activeClass),s.toggleClass(this.selectors.activeClass),i&&setTimeout((()=>{e.find(this.selectors.input).focus()}),100)}handleInput(e){const t=e.val().trim(),s=e.closest(this.selectors.search).find(this.selectors.bar);t.length>=1?this.openBar(s):this.closeBar(s)}openBar(e){e.addClass(this.selectors.visibleClass)}closeBar(e=$(this.selectors.bar)){e.removeClass(this.selectors.visibleClass)}closeSearch(){$(this.selectors.toggler).removeClass(this.selectors.activeClass),$(this.selectors.content).removeClass(this.selectors.activeClass),this.closeBar()}},window.AuthController=new class{constructor(){this.selectors={auth:".header__auth",toggler:".header__auth-btn, .person-menu-toggler",menu:".header__person-menu",closeBtn:".person-menu__close",block:".person-menu__block",blockCaption:".person-menu__block-caption",blockList:".person-menu__block-list",activeClass:"active",visibleClass:"visible",bodyClass:"open-person-menu"},this.init()}init(){$(document).on("click",this.selectors.toggler,(e=>{e.preventDefault(),e.stopPropagation(),this.toggleMenu()})),$(document).on("click",this.selectors.closeBtn,(()=>{this.closeMenu()})),$(document).on("click",this.selectors.blockCaption,(e=>{const t=$(e.target).closest(this.selectors.blockCaption),s=t.closest(this.selectors.block);this.toggleAccordion(s,t)})),$(document).on("click",(e=>{$(e.target).closest(this.selectors.auth).length||$(e.target).closest(".person-menu-toggler").length||this.closeMenu()})),$(document).on("keydown",(e=>{"Escape"===e.key&&this.closeMenu()}))}toggleMenu(){const e=$(".header__auth-btn"),t=$(".person-menu-toggler"),s=$(this.selectors.menu);s.hasClass(this.selectors.visibleClass)?$("body").removeClass(this.selectors.bodyClass):(window.CatalogController?.closeCatalog(),window.SearchController?.closeSearch(),$("body").addClass(this.selectors.bodyClass)),e.toggleClass(this.selectors.activeClass),t.toggleClass(this.selectors.activeClass),s.toggleClass(this.selectors.visibleClass)}closeMenu(){$(".header__auth-btn").removeClass(this.selectors.activeClass),$(".person-menu-toggler").removeClass(this.selectors.activeClass),$(this.selectors.menu).removeClass(this.selectors.visibleClass),$("body").removeClass(this.selectors.bodyClass),this.resetAccordions()}toggleAccordion(e,t){const s=e.find(this.selectors.blockList),i=$(this.selectors.block).not(e),o=t.hasClass(this.selectors.activeClass);i.find(this.selectors.blockCaption).removeClass(this.selectors.activeClass),i.find(this.selectors.blockList).slideUp(300),o?(t.removeClass(this.selectors.activeClass),s.stop().slideUp(300)):(t.addClass(this.selectors.activeClass),s.stop().slideDown(300))}resetAccordions(){$(this.selectors.blockCaption).removeClass(this.selectors.activeClass),$(this.selectors.blockList).hide()}};class e{constructor(e,t){this.$slider=$(e),this.options=t,this.init=!1,this.swiper=null,this.$slider.length&&(this.handleResize(),$(window).on("resize",(()=>this.handleResize())))}handleResize(){window.innerWidth<=767.98?this.init||(this.init=!0,this.swiper=new Swiper(this.$slider[0],this.options)):this.init&&(this.swiper.destroy(),this.swiper=null,this.init=!1)}}if($(".benefits__list")&&new e(".benefits__list .swiper",{spaceBetween:20,navigation:{nextEl:".benefits__next",prevEl:".benefits__prev"},pagination:{el:".benefits__pagination",clickable:!0}}),$(".news__slider")&&new e(".news__slider .swiper",{spaceBetween:20,navigation:{nextEl:".news__next",prevEl:".news__prev"},pagination:{el:".news__pagination",clickable:!0}}),$(".products__slider").length&&$(".products__slider").each((function(e,t){const s=$(t),i=s.find(".swiper");if(!i.length)return;const o=s.find(".products__next")[0],l=s.find(".products__prev")[0];let n;n=s.hasClass("products__slider--small")?{767.98:{slidesPerView:3},991.98:{slidesPerView:4},1199.98:{slidesPerView:5},1419.98:{slidesPerView:6}}:s.hasClass("products__slider--large")?{767.98:{slidesPerView:1},991.98:{slidesPerView:2},1419.98:{slidesPerView:3}}:{767.98:{slidesPerView:2},991.98:{slidesPerView:3},1419.98:{slidesPerView:4}},new Swiper(i[0],{slidesPerView:"auto",spaceBetween:20,watchOverflow:!0,navigation:{nextEl:o,prevEl:l},breakpoints:n})})),$(".news__slider")&&new Swiper(".news__slider .swiper",{slidesPerView:1,spaceBetween:20,watchOverflow:!0,navigation:{nextEl:".news__next",prevEl:".news__prev"},pagination:{el:".news__pagination",clickable:!0},breakpoints:{575.98:{slidesPerView:1.5},767.98:{slidesPerView:2},991.98:{slidesPerView:3},1419.98:{slidesPerView:4}}}),$(".promotions__grid")&&new e(".promotions__grid .swiper",{spaceBetween:20,navigation:{nextEl:".promotions__next",prevEl:".promotions__prev"},pagination:{el:".promotions__pagination",clickable:!0}}),$(".sales__slider")&&new Swiper(".sales__slider .swiper",{slidesPerView:1,spaceBetween:20,watchOverflow:!0,navigation:{nextEl:".sales__next",prevEl:".sales__prev"},pagination:{el:".sales__pagination",clickable:!0},breakpoints:{575.98:{slidesPerView:1.5},767.98:{slidesPerView:2},991.98:{slidesPerView:3},1419.98:{slidesPerView:4}}}),$(".product-details__gallery").length){const h=new Swiper(".product-details__gallery .swiper",{slidesPerView:1,watchOverflow:!0,on:{slideChange:function(){const e=this.activeIndex;$(".product-details__thumb").removeClass("active").eq(e).addClass("active"),d.swiper&&d.swiper.slideTo(e)}}}),d=new e(".product-details__thumbs .swiper",{slidesPerView:"auto",spaceBetween:10,freeMode:!0,watchSlidesProgress:!0});$(document).on("click",".product-details__thumb",(function(){const e=$(this).closest(".product-details__thumb"),t=e.index();$(".product-details__thumb").removeClass("active"),e.addClass("active"),h.slideTo(t)}))}window.FormController=new class{constructor(){this.selectors={field:".form__field",control:".form__control",errorClass:"_error",errorMsg:".form__error-message",requiredAttr:"[data-required]",submitBtn:'[type="submit"]'},this.messages={empty:"Поле обязательно для заполнения",tel:"Введите корректный номер телефона",email:"Введите корректный e-mail",checkbox:"Необходимо ваше согласие"},this.init()}init(){$(document).on("submit","form",(e=>this.handleSubmit(e))),$(document).on("input change",this.selectors.requiredAttr,(e=>{const t=$(e.target),s=t.closest(this.selectors.field);(t.hasClass(this.selectors.errorClass)||s.hasClass(this.selectors.errorClass))&&this.validateField(t)})),$(document).on("keydown",'input[type="tel"]',(e=>this.onPhoneKeyDown(e))),$(document).on("input",'input[type="tel"]',(e=>this.onPhoneInput(e))),$(document).on("paste",'input[type="tel"]',(e=>this.onPhonePaste(e))),$(document).on("focus",'input[type="tel"]',(e=>{e.target.value||(e.target.value="+7 ")}))}handleSubmit(e){const t=$(e.target);if(!this.validateForm(t))return e.preventDefault(),e.stopImmediatePropagation(),!1}validateForm(e){let t=!0;return e.find(this.selectors.requiredAttr).each(((e,s)=>{this.validateField($(s))||(t=!1)})),t}validateField(e){const t=e.val().trim();let s=!1,i=this.messages.empty;return"tel"===e.attr("type")?t.replace(/\D/g,"").length<11&&(s=!0,i=this.messages.tel):"email"===e.attr("type")?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||(s=!0,i=this.messages.email):"checkbox"===e.attr("type")||"radio"===e.attr("type")?e.prop("checked")||(s=!0,i=this.messages.checkbox):""===t&&(s=!0,i=this.messages.empty),this.toggleErrorState(e,s,i),!s}toggleErrorState(e,t,s){const i=e.closest(this.selectors.field),o=i.find(this.selectors.errorMsg),l=i.length?i:e;t?(l.addClass(this.selectors.errorClass),e.addClass(this.selectors.errorClass),o.length&&o.text(s).show()):(l.removeClass(this.selectors.errorClass),e.removeClass(this.selectors.errorClass),o.length&&o.hide())}onPhoneInput(e){const t=e.target;let s=t.value.replace(/\D/g,""),i="";const o=t.selectionStart;if(!s)return t.value="";t.value.length==o?(["7","8","9"].indexOf(s[0])>-1?("9"==s[0]&&(s="7"+s),i="+7 (",s.length>1&&(i+=s.substring(1,4)),s.length>=5&&(i+=") "+s.substring(4,7)),s.length>=8&&(i+="-"+s.substring(7,9)),s.length>=10&&(i+="-"+s.substring(9,11))):i="+"+s.substring(0,16),t.value=i):e.originalEvent.data&&/\D/g.test(e.originalEvent.data)&&(t.value=s)}onPhoneKeyDown(e){const t=e.target.value.replace(/\D/g,"");8==e.keyCode&&1==t.length&&(e.target.value="")}onPhonePaste(e){const t=e.target,s=e.originalEvent.clipboardData||window.clipboardData;if(s){const e=s.getData("Text");/\D/g.test(e)&&(t.value=t.value.replace(/\D/g,""))}}},window.NotifyController=new class{constructor(){this.containerSelector=".notify-container",this.productSelector=".product",this.btnSelector=".add-to-cart-btn",this.displayTime=4e3,this.init()}init(){$(document).on("click",this.btnSelector,(e=>{const t=$(e.currentTarget).closest(this.productSelector);this.handleAddToCart(t)}))}handleAddToCart(e){const t=e.find(".product__name").text().trim(),s=e.find(".quantity-block__input").val()||1;this.show(t,s)}show(e,t){const s=$(`\n            <div class="notify">\n                <div class="notify__title title-sm">\n                    Товар добавлен <span class="color-accent">в корзину</span>\n                </div>\n                <div class="notify__text">Добавлено: ${e} (${t} шт.)</div>\n            </div>\n        `);$(this.containerSelector).append(s),s.hide().fadeIn(300),setTimeout((()=>{s.fadeOut(300,(function(){$(this).remove()}))}),this.displayTime)}};class t{constructor(e){this.$el=$(e),this.$trigger=this.$el.find(".filter-dropdown__trigger"),this.$text=this.$el.find(".filter-dropdown__text"),this.$icon=this.$el.find(".filter-dropdown__icon"),this.$body=this.$el.find(".filter-dropdown__body"),this.$applyBtn=this.$el.find(".btn-apply"),this.defaultText=this.$text.data("default"),this.isApplied=!1,this.init(),this._bindFormReset()}init(){this.$trigger.on("click",(e=>{$(e.target).hasClass("icon-cross")||$(e.target).closest(".icon-cross").length?(e.stopPropagation(),this.reset()):this.toggle()})),this.$applyBtn.on("click",(()=>{this.apply()})),$(document).on("click",(e=>{this.$el.is(e.target)||0!==this.$el.has(e.target).length||this.close()}))}_bindFormReset(){const e=this.$el.closest("form");e.length&&e.on("reset",(()=>{setTimeout((()=>this.reset()),0)}))}toggle(){$(".filter-dropdown").not(this.$el).removeClass("active").find(".filter-dropdown__body").slideUp(200),this.$el.toggleClass("active"),this.$body.slideToggle(200)}close(){this.$el.removeClass("active"),this.$body.slideUp(200)}apply(){this.hasValue()?(this.isApplied=!0,this.updateView(),this.$icon.removeClass("icon-chevron-down").addClass("icon-cross"),this.$el.addClass("is-selected")):this.reset(),this.close()}reset(){this.clearInputs(),this.isApplied=!1,this.$text.text(this.defaultText),this.$icon.removeClass("icon-cross").addClass("icon-chevron-down"),this.$el.removeClass("is-selected"),this.$el.hasClass("active")&&this.close()}hasValue(){return!1}updateView(){}clearInputs(){}}class s extends t{hasValue(){return this.$el.find('input[type="radio"]:checked').length>0}updateView(){this.$text.text(`${this.defaultText} (1)`)}clearInputs(){this.$el.find('input[type="radio"]').prop("checked",!1)}}class i extends t{hasValue(){return this.$el.find('input[type="checkbox"]:checked').length>0}updateView(){const e=this.$el.find('input[type="checkbox"]:checked').length;this.$text.text(`${this.defaultText} (${e})`)}clearInputs(){this.$el.find('input[type="checkbox"]').prop("checked",!1)}}class o extends t{hasValue(){const e=this.$el.find('input[name*="min"]').val(),t=this.$el.find('input[name*="max"]').val();return void 0!==e&&""!==e||void 0!==t&&""!==t}updateView(){this.$text.text(this.defaultText)}clearInputs(){this.$el.find('input[type="number"]').val("")}}$(".filter-dropdown").each((function(){switch($(this).data("type")){case"radio":new s(this);break;case"checkbox":new i(this);break;case"range":new o(this)}}));const l=$(".range");l.length>0&&l.each((function(){const e=$(this).find(".range__slider")[0],t=$(this).find(".range__control--start"),s=$(this).find(".range__control--end"),i=[t,s],o=$(this).closest("form"),l=o.find('button[type="reset"]'),n=$(`button[type="reset"][form="${o.attr("id")}"]`),a=$.merge(l,n),r=parseInt(t.attr("min")),c=parseInt(s.attr("max"))||1e6,h=Math.round(.05*(c-r));function d(e){return parseInt(e.replace(/\s/g,""))}function p(e){const t=parseInt(e.attr("maxlength")),s=t-Math.floor((t-1)/4);e.attr("maxlength",s)}function u(e){const t=$(e),s=t.siblings(".range__unit");if(0===s.length)return;const i=window.getComputedStyle(e),o=function(e,t){const s=document.createElement("span"),i=window.getComputedStyle(t);s.style.position="absolute",s.style.visibility="hidden",s.style.whiteSpace="nowrap",s.style.font=i.font,s.style.letterSpacing=i.letterSpacing,s.textContent=String(e||""),document.body.appendChild(s);const o=s.offsetWidth;return document.body.removeChild(s),o}(t.val(),e),l=parseFloat(i.paddingLeft)||0,n=parseFloat(i.paddingRight)||0,a=e.clientWidth,r=Math.max(0,a-l-n);let c;const h=i.textAlign;c="center"===h?l+Math.max(0,(r-o)/2):"right"===h||"end"===h?a-n-o:l;const d=s.last(),p=c+o+4,u=a-n-d.outerWidth(),g=Math.min(p,u);d.css("left",g+"px");const m=s.first(),v=m.outerWidth();let _=c-v-4;const w=l;let f=Math.max(w,_);f+v+4>g&&(f=Math.max(w,g-v-4)),m.css("left",f+"px"),s.addClass("ready")}p(t),p(s),t.val(t.val()),s.val(s.val()),noUiSlider.create(e,{start:[d(t.val()),d(s.val())],connect:!0,margin:h,range:{min:[r],max:[c]}}),e.noUiSlider.on("update",(function(e,t){i[t].val(Math.round(e[t])),u(i[t][0])})),$.each(i,(function(t,s){$(s).on("change",(function(s){((t,s)=>{let i=[null,null];i[t]=d(s),e.noUiSlider.set(i)})(t,$(this).val())})),$(s).on("input",(function(e){let t=$(this).val();t=t.replace(/[^\d]/g,""),$(this).val(t),$(this).addClass("active")})),$(s).on("input change",(function(){u(this)})),u(s[0])}));const g=new ResizeObserver((()=>{u(t[0]),u(s[0])}));g.observe(t[0]),g.observe(s[0]),a.length>0&&a.on("click",(function(){setTimeout((function(){t.val(t[0].defaultValue),s.val(s[0].defaultValue),e.noUiSlider.set([d(t[0].defaultValue),d(s[0].defaultValue)])}),0)}))}));const n=$(".arrow-top");if(n.length){const p=$("html"),u=300;$(window).on("scroll",(function(){$(window).scrollTop()>u?n.addClass("visible"):n.removeClass("visible")})),n.on("click",(function(){const e="smooth"===p.css("scroll-behavior");e&&p.css("scroll-behavior","auto"),$("html, body").animate({scrollTop:0},600,(function(){e&&p.css("scroll-behavior","smooth")}))}))}const a=$(".header");if(a.length){const g=$(window),m=100;g.on("scroll",(function(){const e=g.scrollTop();e>m?a.addClass("scroll"):e<=10&&a.removeClass("scroll")}))}function r(){$(".map-block").each((function(){const e=$(this);if(e.hasClass("is-initialized"))return;const t=e.data("coords"),s=e.data("placemark-logo");if(!t)return;const i=t.split(",").map((e=>parseFloat(e.trim()))),o=new ymaps.Map(e[0],{center:i,zoom:16,controls:["zoomControl"]},{suppressMapOpenBlock:!0}),l=new ymaps.Placemark(i,{},{iconLayout:"default#image",iconImageHref:s,iconImageSize:[40,40],iconImageOffset:[-20,-20]});o.geoObjects.add(l),window.innerWidth<768&&(o.behaviors.disable("scrollZoom"),o.behaviors.disable("drag")),e.addClass("is-initialized"),o.container.fitToViewport(),window.addEventListener("resize",(()=>{o.container.fitToViewport()}))}))}!function(){if($(".map-block").length)if("undefined"!=typeof ymaps)ymaps.ready(r);else{const e=document.createElement("script");e.async=!0,e.defer=!0,e.src="https://api-maps.yandex.ru/2.1/?lang=ru_RU",e.onload=()=>ymaps.ready(r),document.head.append(e)}}();const c=$(".compare__table");if(c.length){const v=c.find(".compare__row"),_=$(".compare__more-btn"),w=767.98;function f(){window.innerWidth<=w?_.hasClass("is-expanded")||(v.each((function(e){e>=3?$(this).hide():$(this).show()})),_.show().text("Показать больше")):(v.show(),_.hide())}_.on("click",(function(){const e=$(this);e.hasClass("is-expanded")?(v.each((function(e){e>=3&&$(this).fadeOut(300)})),e.removeClass("is-expanded").text("Показать больше")):(v.fadeIn(300),e.addClass("is-expanded").text("Скрыть"))})),f(),$(window).on("resize",f)}}))})();